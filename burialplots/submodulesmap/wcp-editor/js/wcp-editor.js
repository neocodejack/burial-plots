!function(t,o,i,e){function n(){this.host=t("#wcp-editor"),this.forms={},this.tooltip=e,this.modal=e,this.modalTimeout=e,this.loadingScreen=e,this.loadingScreenTimeout=e,this.saveToDeleteID=e}function r(t){this.options=t,this.id="wcp-form-"+(Math.floor(9999*Math.random())+1),this.controls=[],this.formUpdated=e,this.model={},this.selectedTab=0}function a(t,o,i){this.id=Math.floor(9999*Math.random())+1,this.elementID="wcp-editor-control-"+this.id,this.elementClass="sq-element-option-group",this.type=o.type,this.getValue=o.getValue,this.setValue=o.setValue,this.HTML=o.HTML,this.name=t.name,this.title=t.title,this.options=t.options,this._value=e,this.init=o.init,this.init(),this.valueUpdated=i,this.customLabel=o.customLabel}function d(){i.selection?i.selection.empty():o.getSelection&&o.getSelection().removeAllRanges()}var s=e,c=[],l=[];n.prototype.init=function(o){function i(t){var o="";o=t.customIcon!=e?t.customIcon:'<i class="'+t.icon+'" aria-hidden="true"></i>',n+='       <div class="wcp-editor-toolbar-button" data-wcp-editor-toolbar-button-name="'+t.name+'" data-wcp-tooltip="'+t.title+'" data-wcp-tooltip-position="right" data-wcp-editor-toolbar-button-kind="'+t.kind+'">',n+='           <div class="wcp-editor-toolbar-button-icon">'+o+"</div>",n+='           <div class="wcp-editor-toolbar-button-title">'+t.title+"</div>",n+="       </div>"}this.options=o;var n="",r="";this.options.canvasFill&&(r="wcp-editor-canvas-fill");var a="";this.options.canvasFill||(a+="width: "+this.options.canvasWidth+"px; height: "+this.options.canvasHeight+"px;"),n+='<div id="wcp-editor-left">',n+='   <div id="wcp-editor-main-buttons">',this.options.newButton&&(n+='       <div id="wcp-editor-button-new" class="wcp-editor-main-button">',n+='           <div class="wcp-editor-main-button-icon"><i class="fa fa-file" aria-hidden="true"></i></div>',n+='           <div class="wcp-editor-main-button-text">New</div>',n+="       </div>"),n+='       <div id="wcp-editor-button-save" class="wcp-editor-main-button">',n+='           <div class="wcp-editor-main-button-icon"><i class="fa fa-floppy-o" aria-hidden="true"></i></div>',n+='           <div class="wcp-editor-main-button-text">Save</div>',n+="       </div>",n+='       <div id="wcp-editor-button-load" class="wcp-editor-main-button">',n+='           <div class="wcp-editor-main-button-icon"><i class="fa fa-sign-out" aria-hidden="true"></i></div>',n+='           <div class="wcp-editor-main-button-text">Load</div>',n+="       </div>",n+='       <div id="wcp-editor-button-undo" class="wcp-editor-main-button">',n+='           <div class="wcp-editor-main-button-icon"><i class="fa fa-undo" aria-hidden="true"></i></div>',n+='           <div class="wcp-editor-main-button-text">Undo</div>',n+="       </div>",n+='       <div id="wcp-editor-button-redo" class="wcp-editor-main-button">',n+='           <div class="wcp-editor-main-button-icon"><i class="fa fa-repeat" aria-hidden="true"></i></div>',n+='           <div class="wcp-editor-main-button-text">Redo</div>',n+="       </div>",n+='       <div id="wcp-editor-button-preview" class="wcp-editor-main-button">',n+='           <div class="wcp-editor-main-button-icon"><i class="fa fa-eye" aria-hidden="true"></i></div>',n+='           <div class="wcp-editor-main-button-text">Preview</div>',n+="       </div>",n+="   </div>",n+='<div id="wcp-editor-main-tab-buttons">';for(var d=0;d<this.options.mainTabs.length;d++)n+='<div class="wcp-editor-main-tab-button" data-wcp-main-tab-button-name="'+this.options.mainTabs[d].name+'">',n+='   <div class="wcp-editor-main-tab-button-icon"><i class="'+this.options.mainTabs[d].icon+'" aria-hidden="true"></i></div>',n+='   <div class="wcp-editor-main-tab-button-text">'+this.options.mainTabs[d].name+"</div>",n+="</div>";n+="</div>",n+='<div id="wcp-editor-main-tab-contents">';for(var d=0;d<this.options.mainTabs.length;d++)n+='<div class="wcp-editor-main-tab-content" data-wcp-main-tab-content-name="'+this.options.mainTabs[d].name+'">',n+='   <div class="wcp-editor-main-tab-content-title">'+this.options.mainTabs[d].title+"</div>",n+='   <div class="wcp-editor-main-tab-content-inner-wrap">'+t.wcpEditorGetContentForTabWithName(this.options.mainTabs[d].name)+"</div>",n+="</div>";n+="</div>",n+="</div>",n+='<div id="wcp-editor-center">',this.options.helpButton&&(n+='<div id="wcp-editor-help-button"><i class="fa fa-question" aria-hidden="true"></i></div>'),n+='    <div id="wcp-editor-extra-main-buttons">';for(var d=0;d<this.options.extraMainButtons.length;d++){var s=this.options.extraMainButtons[d],c="";s.tooltip&&(c='data-wcp-tooltip="'+s.tooltip+'" data-wcp-tooltip-position="bottom"'),n+='       <div class="wcp-editor-extra-main-button" data-wcp-editor-extra-main-button-name="'+s.name+'" '+c+">",n+='           <div class="wcp-editor-extra-main-button-icon"><i class="'+s.icon+'" aria-hidden="true"></i></div>',n+='           <div class="wcp-editor-extra-main-button-title">'+s.title+"</div>",n+="       </div>"}if(n+="    </div>",this.options.toolbarButtons[0].constructor==Array){n+='   <div id="wcp-editor-toolbar-wrap">';for(var d=0;d<this.options.toolbarButtons.length;d++){n+='   <div id="wcp-editor-toolbar" class="wcp-editor-toolbar-grouped">';for(var s=this.options.toolbarButtons[d],l=0;l<s.length;l++)i(s[l]);n+="    </div>"}n+="    </div>"}else{n+='   <div id="wcp-editor-toolbar">';for(var d=0;d<this.options.toolbarButtons.length;d++){var s=this.options.toolbarButtons[d];i(s)}n+="    </div>"}n+='    <div id="wcp-editor-canvas" class="'+r+'" style="'+a+'">'+t.wcpEditorGetContentForCanvas()+"</div>",n+="</div>",n+='<div id="wcp-editor-right">',n+="</div>",this.host.html(n),this.setListItems(t.wcpEditorGetListItems()),this.openMainTabWithName(this.options.mainTabs[0].name),this.events()},n.prototype.events=function(){var o=this;t("[data-wcp-main-tab-button-name]").on("click",function(){var i=t(this).data("wcp-main-tab-button-name");o.openMainTabWithName(i)}),t(i).off("click","#wcp-editor-button-new"),t(i).on("click","#wcp-editor-button-new",function(){t.wcpEditorEventNewButtonPressed(),o.presentCreateNewModal()}),t(i).off("click","#wcp-editor-button-save"),t(i).on("click","#wcp-editor-button-save",function(){t.wcpEditorEventSaveButtonPressed()}),t(i).off("click","#wcp-editor-button-load"),t(i).on("click","#wcp-editor-button-load",function(){t.wcpEditorEventLoadButtonPressed(),o.presentLoadModal()}),t(i).off("click","#wcp-editor-button-undo"),t(i).on("click","#wcp-editor-button-undo",function(){t.wcpEditorEventUndoButtonPressed()}),t(i).off("click","#wcp-editor-button-redo"),t(i).on("click","#wcp-editor-button-redo",function(){t.wcpEditorEventRedoButtonPressed()}),t(i).off("click","#wcp-editor-button-preview"),t(i).on("click","#wcp-editor-button-preview",function(){t.wcpEditorEventPreviewButtonPressed(),o.options.previewToggle&&(t(this).hasClass("wcp-active")?(t(this).removeClass("wcp-active"),t.wcpEditorEventExitedPreviewMode()):(t(this).addClass("wcp-active"),t.wcpEditorEventEnteredPreviewMode()))}),t(i).off("click",".wcp-editor-extra-main-button"),t(i).on("click",".wcp-editor-extra-main-button",function(i){var e=t(this).data("wcp-editor-extra-main-button-name");t.wcpEditorEventExtraMainButtonClick(e),"import"==e&&o.presentImportModal(),"export"==e&&o.presentExportModal()}),t(i).off("click",".wcp-editor-toolbar-button"),t(i).on("click",".wcp-editor-toolbar-button",function(o){t.wcpEditorEventPressedTool(t(this).data("wcp-editor-toolbar-button-name")),"button"!=t(this).data("wcp-editor-toolbar-button-kind")&&(t(".wcp-editor-toolbar-button").removeClass("wcp-active"),t(this).addClass("wcp-active"),t.wcpEditorEventSelectedTool(t(this).data("wcp-editor-toolbar-button-name")))}),t(i).off("click","#wcp-editor-help-button"),t(i).on("click","#wcp-editor-help-button",function(o){t.wcpEditorEventHelpButtonPressed()}),t(i).off("mouseover",".wcp-editor-list-item"),t(i).on("mouseover",".wcp-editor-list-item",function(o){t.wcpEditorEventListItemMouseover(t(this).data("wcp-editor-list-item-id"))}),t(i).off("click",".wcp-editor-list-item"),t(i).on("click",".wcp-editor-list-item",function(i){0==t(i.target).closest(".wcp-editor-list-item-buttons").length&&(o.selectListItem(t(this).data("wcp-editor-list-item-id")),t.wcpEditorEventListItemSelected(t(this).data("wcp-editor-list-item-id")))}),t(i).off("click",".wcp-editor-list-item-button"),t(i).on("click",".wcp-editor-list-item-button",function(){var o=t(this).closest(".wcp-editor-list-item").data("wcp-editor-list-item-id"),i=t(this).data("wcp-editor-list-item-button-name");t.wcpEditorEventListItemButtonPressed(o,i)}),t(i).off("click",".wcp-editor-list-item-title-button"),t(i).on("click",".wcp-editor-list-item-title-button",function(){var o=t(this).data("wcp-editor-list-item-title-button-name");t.wcpEditorEventListItemTitleButtonPressed(o)}),t(i).off("mouseover","[data-wcp-tooltip]"),t(i).on("mouseover","[data-wcp-tooltip]",function(i){t(this).addClass("wcp-visible-tooltip"),o.showTooltip(t(this),t(this).data("wcp-tooltip"),t(this).data("wcp-tooltip-position"))}),t(i).off("mouseout","[data-wcp-tooltip]"),t(i).on("mouseout","[data-wcp-tooltip]",function(i){o.hideTooltip(t(this))}),t(i).off("click","#wcp-editor-modal"),t(i).on("click","#wcp-editor-modal",function(i){if("wcp-editor-modal"==t(i.target).attr("id")){o.closeModal();var e=t("#wcp-editor-modal").data("wcp-editor-modal-name");t.wcpEditorEventModalClosed(e)}}),t(i).off("click",".wcp-editor-modal-close"),t(i).on("click",".wcp-editor-modal-close",function(i){o.closeModal();var e=t("#wcp-editor-modal").data("wcp-editor-modal-name");t.wcpEditorEventModalClosed(e)}),t(i).off("click",".wcp-editor-modal-button"),t(i).on("click",".wcp-editor-modal-button",function(o){var i=t("#wcp-editor-modal").data("wcp-editor-modal-name"),e=t(this).data("wcp-editor-modal-button-name");t.wcpEditorEventModalButtonClicked(i,e)}),t(i).off("click","#wcp-editor-confirm-import"),t(i).on("click","#wcp-editor-confirm-import",function(i){var n=t("#wcp-editor-textarea-import").val(),r=e;try{r=JSON.parse(n)}catch(t){console.log("error decoding JSON!")}r===e?t("#wcp-editor-import-error").show():(t("#wcp-editor-import-error").hide(),t.wcpEditorEventImportedJSON(r),o.closeModal())}),t(i).off("click","#button-loading-screen-close"),t(i).on("click","#button-loading-screen-close",function(){o.hideLoadingScreen()}),t(i).off("click","#wcp-editor-button-create-new-instance"),t(i).on("click","#wcp-editor-button-create-new-instance",function(i){if(0==t("#wcp-editor-input-create-new").val().length)t("#wcp-editor-create-new-error").show();else{t("#wcp-editor-create-new-error").hide();var e=t("#wcp-editor-input-create-new").val();t.wcpEditorEventCreatedNewInstance(e),o.closeModal()}}),t(i).off("click",".wcp-editor-save-list-item"),t(i).on("click",".wcp-editor-save-list-item",function(){var i=t(this).parent().data("wcp-editor-save-list-item-id");t.wcpEditorEventLoadSaveWithID(i),o.closeModal()}),t(i).off("click",".wcp-editor-save-list-item-delete-button"),t(i).on("click",".wcp-editor-save-list-item-delete-button",function(){o.saveToDeleteID=t(this).parent().data("wcp-editor-save-list-item-id"),o.closeModal(),o.presentDeleteSaveConfirmationModal()}),t(i).off("click","#wcp-editor-cancel-delete-save"),t(i).on("click","#wcp-editor-cancel-delete-save",function(){o.presentLoadModal()}),t(i).off("click","#wcp-editor-confirm-delete-save"),t(i).on("click","#wcp-editor-confirm-delete-save",function(){t.wcpEditorEventDeleteSaveWithID(o.saveToDeleteID,function(){o.presentLoadModal()})}),t(i).off("keyup","#wcp-editor-input-create-new"),t(i).on("keyup","#wcp-editor-input-create-new",function(o){13==o.keyCode&&t("#wcp-editor-modal").length>0&&t("#wcp-editor-modal").hasClass("wcp-editor-modal-visible")&&(1==t(".wcp-editor-modal-button-primary").length&&t(".wcp-editor-modal-button-primary").click(),1==t(".wcp-editor-modal-button-danger").length&&t(".wcp-editor-modal-button-danger").click())});var n=0,r=0,a=0,s=0,c=!1,l=!1,p=5,w=[],m=-1,u=-1,v=e,h=e,f=0,b=0,g=0;t(i).off("mousedown",".wcp-editor-list-item"),t(i).on("mousedown",".wcp-editor-list-item",function(o){n=o.pageX,r=o.pageY,c=!0,v=t(this),m=v.data("wcp-editor-list-item-index"),f=v.outerWidth(),b=v.outerHeight(),g=t("#wcp-editor-right").scrollTop()}),t(i).off("mousemove.wcp-editor-list-item-reorder"),t(i).on("mousemove.wcp-editor-list-item-reorder",function(o){var i=Math.abs(o.pageX-n),e=Math.abs(o.pageY-r);if(!l&&c&&(i>p||e>p)){l=!0,h=v.clone(),h.addClass("wcp-editor-dragged-list-item"),h.css({width:f,left:v.offset().left,top:v.offset().top}),a=v.offset().left,s=v.offset().top,t("body").prepend(h),h.wrap('<div class="wcp-editor-dragged-list-item-wrap"></div>');for(var E='<div id="wcp-editor-list-item-invisible-tmp" style="width: '+f+"px; height: "+b+'px; position: relative;"></div>',C=t("#wcp-editor-right .wcp-editor-list-item").length,y=0;y<C;y++)t('#wcp-editor-right .wcp-editor-list-item[data-wcp-editor-list-item-index="'+y+'"]').before(E),w.push(t("#wcp-editor-list-item-invisible-tmp").offset().top+b/2),t("#wcp-editor-list-item-invisible-tmp").remove();v.hide()}if(l){d(),h.css({left:a-(n-o.pageX),top:s-(r-o.pageY)});for(var M=-1,T=99999,x=h.offset().top+b/2,y=0;y<w.length;y++){var S=Math.abs(x-w[y]);S<T&&(T=S,M=y)}if(u!=M){t("#wcp-editor-list-item-visible-tmp").remove();var k='<div id="wcp-editor-list-item-visible-tmp" style="width: '+f+"px; height: "+b+'px;"><div id="wcp-editor-list-item-visible-tmp-inner"></div></div>';M<m?t('#wcp-editor-right .wcp-editor-list-item[data-wcp-editor-list-item-index="'+M+'"]').before(k):t('#wcp-editor-right .wcp-editor-list-item[data-wcp-editor-list-item-index="'+M+'"]').after(k),u=M}t("#wcp-editor-right").scrollTop(g)}}),t(i).off("mouseup.wcp-editor-list-item-reorder"),t(i).on("mouseup.wcp-editor-list-item-reorder",function(){l&&(t(".wcp-editor-dragged-list-item-wrap").remove(),t("#wcp-editor-list-item-visible-tmp").remove(),v.show(),t.wcpEditorEventListItemMoved(v.attr("id"),m,u)),c=!1,l=!1,m=-1,u=-1,w=[]})},n.prototype.openMainTabWithName=function(o){t(".wcp-editor-main-tab-content").hide(),t('[data-wcp-main-tab-content-name="'+o+'"]').show(),t(".wcp-editor-main-tab-button").removeClass("wcp-active"),t('[data-wcp-main-tab-button-name="'+o+'"]').addClass("wcp-active")},n.prototype.presentModal=function(o){if(clearTimeout(this.modalTimeout),0==t("#wcp-editor-modal").length){var i="";i+='<div id="wcp-editor-modal">',i+='   <div class="wcp-editor-modal-body">',i+='       <div class="wcp-editor-modal-close"><i class="fa fa-times" aria-hidden="true"></i></div>',i+='       <div class="wcp-editor-modal-header"></div>',i+='       <div class="wcp-editor-modal-content"></div>',i+='       <div class="wcp-editor-modal-footer"></div>',i+="       </div>",i+="   </div>",i+="</div>",t("body").append(i),this.modal=t("#wcp-editor-modal")}this.modal||(this.modal=t("#wcp-editor-modal")),this.modal.data("wcp-editor-modal-name",o.name),this.modal.find(".wcp-editor-modal-header").html(o.title),this.modal.find(".wcp-editor-modal-content").html(o.body);for(var e="",n=0;n<o.buttons.length;n++){var r="",a="";"primary"==o.buttons[n].class&&(r="wcp-editor-modal-button-primary"),"danger"==o.buttons[n].class&&(r="wcp-editor-modal-button-danger"),o.buttons[n].id&&(a=o.buttons[n].id),e+='<div class="wcp-editor-modal-button '+r+'" id="'+a+'" data-wcp-editor-modal-button-name="'+o.buttons[n].name+'">'+o.buttons[n].title+"</div>"}this.modal.find(".wcp-editor-modal-footer").html(e);var d=this;d.modal.css({display:"flex"}),setTimeout(function(){d.modal.addClass("wcp-editor-modal-visible")},10)},n.prototype.closeModal=function(){var t=this;this.modal.removeClass("wcp-editor-modal-visible"),this.modalTimeout=setTimeout(function(){t.modal.hide()},330)},n.prototype.presentCreateNewModal=function(){var o="";o+='<div class="wcp-editor-form-control">',o+='  <label for="wcp-editor-input-create-new">Name: </label>',o+='  <input type="text" id="wcp-editor-input-create-new">',o+='  <div id="wcp-editor-create-new-error">Please enter a name!</div>',o+="</div>";var i={name:"create_new",title:"Create New",buttons:[{name:"cancel",title:"Cancel",class:""},{name:"create",title:"Create",class:"primary",id:"wcp-editor-button-create-new-instance"}],body:o};this.presentModal(i),t("#wcp-editor-input-create-new").get(0).focus()},n.prototype.presentLoadModal=function(){var o=this;this.presentLoadingScreenWithText("Loading Saves..."),t.wcpEditorGetSaves(function(t){for(var i="",e=0;e<t.length;e++)i+='  <div class="wcp-editor-save-list-item-wrap" data-wcp-editor-save-list-item-name="'+t[e].name+'" data-wcp-editor-save-list-item-id="'+t[e].id+'">',i+='      <div class="wcp-editor-save-list-item">'+t[e].name+"</div>",i+='      <div class="wcp-editor-save-list-item-delete-button"><i class="fa fa-trash-o" aria-hidden="true"></i></div>',i+="  </div>";var n={name:"load",title:"Load",buttons:[{name:"cancel",title:"Cancel",class:""}],body:i};o.hideLoadingScreen(),o.presentModal(n)})},n.prototype.presentDeleteSaveConfirmationModal=function(){var t={name:"confirmation",title:"Delete Save",buttons:[{name:"cancel",title:"Cancel",class:"",id:"wcp-editor-cancel-delete-save"},{name:"delete",title:"Delete",class:"danger",id:"wcp-editor-confirm-delete-save"}],body:"Are you sure you want to permanently delete this save?"};this.presentModal(t)},n.prototype.presentImportModal=function(){var o="";o+='<div class="wcp-editor-form-control">',o+='   <label for="wcp-editor-textarea-import">Paste code to import:</label>',o+='   <textarea id="wcp-editor-textarea-import"></textarea>',o+='  <div id="wcp-editor-import-error">Invalid code!</div>',o+="</div>";var i={name:"import",title:"Import",buttons:[{name:"cancel",title:"Cancel",class:""},{name:"import",title:"Import",class:"primary",id:"wcp-editor-confirm-import"}],body:o};this.presentModal(i),t("#wcp-editor-textarea-import").get(0).focus()},n.prototype.presentExportModal=function(){var o="";o+='<div class="wcp-editor-form-control">',o+='   <label for="wcp-editor-textarea-export">Copy this code to import it later:</label>',o+='   <textarea id="wcp-editor-textarea-export">'+t.wcpEditorGetExportJSON()+"</textarea>",o+="</div>";var i={name:"export",title:"Export",buttons:[{name:"cancel",title:"Done",class:"primary"}],body:o};this.presentModal(i),t("#wcp-editor-textarea-export").get(0).select()},n.prototype.setContentForTabWithName=function(o,i){t('.wcp-editor-main-tab-content[data-wcp-main-tab-content-name="'+o+'"]').find(".wcp-editor-main-tab-content-inner-wrap").html(i)},n.prototype.setContentForCanvas=function(o){t("#wcp-editor-canvas").html(o)},n.prototype.setListItems=function(o){for(var i=t("#wcp-editor-list").scrollTop(),e="",n=0;n<this.options.listItemButtons.length;n++){var r=this.options.listItemButtons[n];e+='<div class="wcp-editor-list-item-button" data-wcp-editor-list-item-button-name="'+r.name+'" data-wcp-tooltip="'+r.title+'" data-wcp-tooltip-position="bottom">',e+='    <i class="'+r.icon+'" aria-hidden="true"></i>',e+="</div>"}var a="";if(this.options.listItemTitle&&this.options.listItemTitle.length>0){if(t("#wcp-editor-right").addClass("wcp-editor-right-with-title"),a+='<div id="wcp-editor-list-title">'+this.options.listItemTitle+"</div>",this.options.listItemTitleButtons.length>0){t("#wcp-editor-right").addClass("wcp-editor-right-with-title-buttons"),a+='<div id="wcp-editor-list-item-title-buttons">';for(var n=0;n<this.options.listItemTitleButtons.length;n++){var r=this.options.listItemTitleButtons[n];a+='<div class="wcp-editor-list-item-title-button" data-wcp-editor-list-item-title-button-name="'+r.name+'" data-wcp-tooltip="'+r.title+'" data-wcp-tooltip-position="bottom">',a+='    <i class="'+r.icon+'" aria-hidden="true"></i>',a+="</div>"}a+="</div>"}}else t("#wcp-editor-right").removeClass("wcp-editor-right-with-title");a+='<div id="wcp-editor-list">';for(var n=0;n<o.length;n++)a+='<div class="wcp-editor-list-item" id="wcp-editor-list-item-'+o[n].id+'" data-wcp-editor-list-item-index="'+n+'" data-wcp-editor-list-item-id="'+o[n].id+'">',a+='   <div class="wcp-editor-list-item-title">'+o[n].title+"</div>",a+='   <div class="wcp-editor-list-item-buttons">'+e+"</div>",a+="</div>";a+="</div>",t("#wcp-editor-right").html(a),t("#wcp-editor-list").scrollTop(i)},n.prototype.selectListItem=function(o){t(".wcp-editor-list-item").removeClass("wcp-active"),t("#wcp-editor-list-item-"+o).addClass("wcp-active")},n.prototype.showTooltip=function(i,e,n){0==t("#wcp-editor-tooltip").length&&(t("body").append('<div id="wcp-editor-tooltip"></div>'),this.tooltip=t("#wcp-editor-tooltip")),this.tooltip||(this.tooltip=t("#wcp-editor-tooltip")),this.tooltip.html(e),this.tooltip.show();var r=0,a=0,d=12;"left"==n&&(r=i.offset().left-this.tooltip.outerWidth()-d,a=i.offset().top+i.outerHeight()/2-this.tooltip.outerHeight()/2),"right"==n&&(r=i.offset().left+i.outerWidth()+d,a=i.offset().top+i.outerHeight()/2-this.tooltip.outerHeight()/2),"top"==n&&(r=i.offset().left+i.outerWidth()/2-this.tooltip.outerWidth()/2,a=i.offset().top-this.tooltip.outerHeight()-d),"bottom"==n&&(r=i.offset().left+i.outerWidth()/2-this.tooltip.outerWidth()/2,a=i.offset().top+i.outerHeight()+d),this.tooltip.css({left:r,top:a}),"left"==n&&(this.tooltip.removeClass("wcp-editor-tooltip-left"),this.tooltip.removeClass("wcp-editor-tooltip-right"),this.tooltip.removeClass("wcp-editor-tooltip-top"),this.tooltip.removeClass("wcp-editor-tooltip-bottom"),this.tooltip.addClass("wcp-editor-tooltip-left")),"right"==n&&(this.tooltip.removeClass("wcp-editor-tooltip-left"),this.tooltip.removeClass("wcp-editor-tooltip-right"),this.tooltip.removeClass("wcp-editor-tooltip-top"),this.tooltip.removeClass("wcp-editor-tooltip-bottom"),this.tooltip.addClass("wcp-editor-tooltip-right")),"top"==n&&(this.tooltip.removeClass("wcp-editor-tooltip-left"),this.tooltip.removeClass("wcp-editor-tooltip-right"),this.tooltip.removeClass("wcp-editor-tooltip-top"),this.tooltip.removeClass("wcp-editor-tooltip-bottom"),this.tooltip.addClass("wcp-editor-tooltip-top")),"bottom"==n&&(this.tooltip.removeClass("wcp-editor-tooltip-left"),this.tooltip.removeClass("wcp-editor-tooltip-right"),this.tooltip.removeClass("wcp-editor-tooltip-top"),this.tooltip.removeClass("wcp-editor-tooltip-bottom"),this.tooltip.addClass("wcp-editor-tooltip-bottom")),this.tooltip.offset().left+this.tooltip.outerWidth()>o.innerWidth&&this.tooltip.css({left:o.innerWidth-this.tooltip.outerWidth()}),this.tooltip.offset().left<0&&this.tooltip.css({left:0}),this.tooltip.offset().top+this.tooltip.outerHeight()>o.innerHeight&&this.tooltip.css({top:o.innerHeight-this.tooltip.outerHeight()}),this.tooltip.offset().top<0&&this.tooltip.css({top:0}),this.tooltip.addClass("wcp-editor-tooltip-visible")},n.prototype.hideTooltip=function(){this.tooltip.hide(),this.tooltip.removeClass("wcp-editor-tooltip-visible")},n.prototype.presentLoadingScreenWithText=function(o){if(clearTimeout(this.loadingScreenTimeout),0==t("#wcp-editor-loading-screen").length){var i="";i+='<div id="wcp-editor-loading-screen">',i+='   <div id="wcp-editor-loading-screen-icon"><i class="fa fa-circle-o-notch fa-spin"></i></div>',i+='   <div id="wcp-editor-loading-screen-text"></div>',i+="</div>",t("body").append(i),this.loadingScreen=t("#wcp-editor-loading-screen")}this.loadingScreen||(this.loadingScreen=t("#wcp-editor-loading-screen")),this.loadingScreen.css({display:"flex"}),t("#wcp-editor-loading-screen-icon").html('<i class="fa fa-circle-o-notch fa-spin"></i>'),t("#wcp-editor-loading-screen-text").html(o);var e=this;setTimeout(function(){e.loadingScreen.addClass("wcp-editor-loading-screen-visible")},10)},n.prototype.updateLoadingScreenMessage=function(o){t("#wcp-editor-loading-screen-text").html(o)},n.prototype.hideLoadingScreen=function(){this.loadingScreen||(this.loadingScreen=t("#wcp-editor-loading-screen")),this.loadingScreen.removeClass("wcp-editor-loading-screen-visible");var o=this;this.loadingScreenTimeout=setTimeout(function(){o.loadingScreen.hide()},250)},n.prototype.hideLoadingScreenWithText=function(o,i,e){var n=this;e&&(o+='<div class="wcp-editor-control-button" id="button-loading-screen-close">Close</div>'),t("#wcp-editor-loading-screen-text").html(o),i?t("#wcp-editor-loading-screen-icon").html('<i class="fa fa-times"></i>'):t("#wcp-editor-loading-screen-icon").html('<i class="fa fa-check"></i>'),e||setTimeout(function(){n.hideLoadingScreen()},1e3)},n.prototype.selectTool=function(o){t(".wcp-editor-toolbar-button").removeClass("wcp-active"),t('[data-wcp-editor-toolbar-button-name="'+o+'"]').addClass("wcp-active"),t.wcpEditorEventSelectedTool(o)},n.prototype.setPreviewModeOn=function(){t("#wcp-editor-button-preview").addClass("wcp-active")},n.prototype.setPreviewModeOff=function(){t("#wcp-editor-button-preview").removeClass("wcp-active")},n.prototype.showExtraMainButton=function(o){t("[data-wcp-editor-extra-main-button-name="+o+"]").show()},n.prototype.hideExtraMainButton=function(o){t("[data-wcp-editor-extra-main-button-name="+o+"]").hide()},r.prototype.init=function(){for(var o=0;o<this.options.controlGroups.length;o++)for(var i=0;i<this.options.controlGroups[o].controls.length;i++){var e=this.options.controlGroups[o].controls[i],n=t.extend(!0,{},l[e.type]),r=this,d=new a(e,n,function(){r.controlUpdated(this.name)});d.setVal(e.value),this.controls[e.name]=d}this.events()},r.prototype.events=function(o){var e=this;t(i).on("click","#"+this.id+" [data-wcp-form-tab-button-name]",function(){var o=t(this).data("wcp-form-tab-button-name");e.openFormTabWithName(o)})},r.prototype.openFormTabWithName=function(o){var i=t("#"+this.id);i.find(".wcp-editor-form-tab-content").hide(),i.find('[data-wcp-form-tab-content-name="'+o+'"]').show(),i.find(".wcp-editor-form-tab-button").removeClass("wcp-active"),i.find('[data-wcp-form-tab-button-name="'+o+'"]').addClass("wcp-active"),this.updateForm(),this.selectedTab=i.find('[data-wcp-form-tab-button-name="'+o+'"]').data("wcp-form-tab-button-index")},r.prototype.getFormHTML=function(){var t="",o="",i="";o+='<div class="wcp-editor-form-tabs-wrap">',i+='<div class="wcp-editor-form-tabs-content-wrap">';for(var e=0;e<this.options.controlGroups.length;e++){var n=this.options.controlGroups[e],r="";e==this.selectedTab&&(r="wcp-active"),o+='<div class="wcp-editor-form-tab-button '+r+'" data-wcp-form-tab-button-name="'+n.groupName+'" data-wcp-form-tab-button-index="'+e+'">',o+='   <div class="wcp-editor-form-tab-button-icon"><i class="'+n.groupIcon+'" aria-hidden="true"></i></div>',o+='   <div class="wcp-editor-form-tab-button-text">'+n.groupTitle+"</div>",o+="</div>";var a="display: none;";e==this.selectedTab&&(a=""),i+='<div class="wcp-editor-form-tab-content" data-wcp-form-tab-content-name="'+n.groupName+'" style="'+a+'">';for(var d=0;d<n.controls.length;d++){var s=n.controls[d];if(s.render!==!1){var c="";s.tooltip&&(c='data-wcp-tooltip="'+s.tooltip.text+'" data-wcp-tooltip-position="'+s.tooltip.position+'"'),i+='<div class="wcp-editor-form-control" id="wcp-editor-form-control-'+s.name+'" '+c+">",this.controls[s.name].customLabel||(i+="   <label>"+s.title+"</label>"),i+=this.controls[s.name].HTML(),i+="</div>"}}i+="</div>"}return i+="</div>",o+="</div>",t='<div class="wcp-editor-form-wrap" id="'+this.id+'">'+o+i+"</div>"},r.prototype.controlUpdated=function(o){t.wcpEditorEventFormUpdated(this.options.name,o)},r.prototype.updateForm=function(){for(var t in this.controls)this.controls[t].loadVal()},r.prototype.getModel=function(){for(var t={},o=0;o<this.options.controlGroups.length;o++){var i=this.options.controlGroups[o].groupName;t[i]={};for(var e=0;e<this.options.controlGroups[o].controls.length;e++){var n=this.options.controlGroups[o].controls[e].name,r=this.controls[n].getVal();t[i][n]=r}}return t},r.prototype.setControlValue=function(t,o){this.controls[t]&&this.controls[t].getVal()!==o&&this.controls[t].setVal(o)},r.prototype.showControlsGroup=function(o){t("#"+this.id);t('[data-wcp-form-tab-button-name="'+o+'"]').show()},r.prototype.hideControlsGroup=function(o){var i=t("#"+this.id);i.find('[data-wcp-form-tab-button-name="'+o+'"]').hide(),this.selectedTab==i.find('[data-wcp-form-tab-button-name="'+o+'"]').data("wcp-form-tab-button-index")&&(this.selectedTab=0,this.openFormTabWithName(i.find('[data-wcp-form-tab-button-index="0"]').data("wcp-form-tab-button-name")))},r.prototype.showControl=function(o){var i=t("#"+this.id);i.find("#wcp-editor-form-control-"+o).show()},r.prototype.hideControl=function(o){var i=t("#"+this.id);i.find("#wcp-editor-form-control-"+o).hide()},r.prototype.addControl=function(o,i){for(var e=0;e<this.options.controlGroups.length;e++){var n=this.options.controlGroups[e];if(n.groupName==o){n.controls.push(i);break}}var r=t.extend(!0,{},l[i.type]),d=this,s=new a(i,r,function(){d.controlUpdated(this.name)});s.setVal(i.value),this.controls[i.name]=s},r.prototype.removeControl=function(t){delete this.controls[t];for(var o=0;o<this.options.controlGroups.length;o++){for(var i=this.options.controlGroups[o],e=!1,n=0;n<i.controls.length;n++){var r=i.controls[n];if(r.name==t){i.controls.splice(n,1),e=!0;break}}if(e)break}},a.prototype.getVal=function(){return this._value},a.prototype.setVal=function(t){this._value=t;try{this.setValue(t)}catch(t){console.log(t)}},a.prototype.loadVal=function(){this.setValue(this._value)},a.prototype.valueChanged=function(){this._value=this.getValue(),this.valueUpdated()},t.wcpEditorInit=function(o){var i={canvasFill:!1,canvasWidth:800,canvasHeight:600,mainTabs:[],toolbarButtons:[],extraMainButtons:[],listItemButtons:[],newButton:!0,previewToggle:!0};s=new n,s.init(t.extend(!0,{},i,o))},t.wcpEditorRegisterControl=function(t){l[t.type]=t},t.wcpEditorCreateForm=function(t){c[t.name]=new r(t),c[t.name].init()},t.wcpEditorUpdateForm=function(t){c[t].updateForm()},t.wcpEditorFormAddControl=function(t,o,i){c[t].addControl(o,i)},t.wcpEditorFormRemoveControl=function(t,o){c[t].removeControl(o)},t.wcpEditorFormOpenTab=function(t,o){c[t].openFormTabWithName(o)},t.wcpEditorGetHTMLForFormWithName=function(t){return c[t].getFormHTML()},t.wcpEditorGetModelOfFormWithName=function(t){return c[t].getModel()},t.wcpEditorSetControlValue=function(t,o,i){c[t].setControlValue(o,i)},t.wcpEditorFormShowControlsGroup=function(t,o){c[t].showControlsGroup(o)},t.wcpEditorFormHideControlsGroup=function(t,o){c[t].hideControlsGroup(o)},t.wcpEditorFormShowControl=function(t,o){c[t].showControl(o)},t.wcpEditorFormHideControl=function(t,o){c[t].hideControl(o)},t.wcpEditorSetContentForTabWithName=function(t,o){s.setContentForTabWithName(t,o)},t.wcpEditorOpenMainTabWithName=function(t){s.openMainTabWithName(t)},t.wcpEditorSetContentForCanvas=function(t){s.setContentForCanvas(t)},t.wcpEditorSetListItems=function(t){s.setListItems(t)},t.wcpEditorSelectListItem=function(t){s.selectListItem(t)},t.wcpEditorSelectTool=function(t){s.selectTool(t)},t.wcpEditorPresentLoadingScreen=function(t){s.presentLoadingScreenWithText(t)},t.wcpEditorUpdateLoadingScreenMessage=function(t){s.updateLoadingScreenMessage(t)},t.wcpEditorHideLoadingScreen=function(){s.hideLoadingScreen()},t.wcpEditorHideLoadingScreenWithMessage=function(t,o,i){s.hideLoadingScreenWithText(t,o,i)},t.wcpEditorPresentLoadModal=function(){s.presentLoadModal()},t.wcpEditorPresentModal=function(o){var i={title:"",buttons:[],body:""};s.presentModal(t.extend(!0,{},i,o))},t.wcpEditorCloseModal=function(){s.closeModal()},t.wcpEditorSetPreviewModeOn=function(){s.setPreviewModeOn()},t.wcpEditorSetPreviewModeOff=function(){s.setPreviewModeOff()},t.wcpEditorShowExtraMainButton=function(t){s.showExtraMainButton(t)},t.wcpEditorHideExtraMainButton=function(t){s.hideExtraMainButton(t)},t.wcpEditorGetContentForTabWithName=function(t){},t.wcpEditorGetContentForCanvas=function(){},t.wcpEditorGetListItems=function(){},t.wcpEditorGetSaves=function(t){},t.wcpEditorGetExportJSON=function(){return"{}"},t.wcpEditorEventFormUpdated=function(t,o){},t.wcpEditorEventNewButtonPressed=function(){},t.wcpEditorEventSaveButtonPressed=function(){},t.wcpEditorEventLoadButtonPressed=function(){},t.wcpEditorEventUndoButtonPressed=function(){},
t.wcpEditorEventRedoButtonPressed=function(){},t.wcpEditorEventPreviewButtonPressed=function(){},t.wcpEditorEventEnteredPreviewMode=function(){},t.wcpEditorEventExitedPreviewMode=function(){},t.wcpEditorEventListItemMouseover=function(t){},t.wcpEditorEventListItemSelected=function(t){},t.wcpEditorEventListItemMoved=function(t,o,i){},t.wcpEditorEventListItemButtonPressed=function(t,o){},t.wcpEditorEventListItemTitleButtonPressed=function(t){},t.wcpEditorEventSelectedTool=function(t){},t.wcpEditorEventPressedTool=function(t){},t.wcpEditorEventExtraMainButtonClick=function(t){},t.wcpEditorEventModalButtonClicked=function(t,o){},t.wcpEditorEventModalClosed=function(t){},t.wcpEditorEventCreatedNewInstance=function(t){},t.wcpEditorEventLoadSaveWithID=function(t){},t.wcpEditorEventDeleteSaveWithID=function(t){},t.wcpEditorEventImportedJSON=function(t){},t.wcpEditorEventHelpButtonPressed=function(){}}(jQuery,window,document);