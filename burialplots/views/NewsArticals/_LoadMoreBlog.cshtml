@using BurialPlots.DAL

@{ 
    var TotalBlogCount = new BlogListRepository().GetAll(x => x.IsApproved == true && x.IsFeatured == true).OrderByDescending(x => x.PublishedDate).Count();
    var news = new BlogListRepository().GetAll(x => x.IsApproved == true && x.IsFeatured == true).OrderByDescending(x => x.PublishedDate).Take(13).ToList();
    var BlogCount=news.Count;
}

<ul id="myList">
    @{
        var i = 0;
    }
    <li>
        <div class="blocks">
            @if (news != null)
            {

                foreach (var item in news)
                {
                    <div class="block-article">
                        <a href="@Url.Action("BlogDetail", "NewsArticals", new { id = item.Id })">
                            <div class="image-block">
                                <img src="~/images/Blog/@item.FeaturedImage" style="width:259px;height:173px;">

                            </div>
                            <h4>@item.Title</h4>
                            @if (item.BlogCategory != null)
                            {
                                <p class="sub-title">@item.BlogCategory.Name</p>
                            }

                        </a>
                    </div><!-- block -->

                    i++;

                    if (i == 4)
                    {
                        break;
                    }

                }
            }
        </div><!-- blocks -->
        <div class="blocks">
            @if (news != null)
            {
                for (int j = i; j < news.Count; j++)
                {

                    <div class="block-article column-50">
                        <div class="image-block">
                            <a href="@Url.Action("BlogDetail", "NewsArticals", new { id = news[j].Id })">
                                <p class="blog-title">@news[j].Title</p>
                                <img src="~/images/Blog/@news[j].FeaturedImage" style="width:562px;height:148px;">
                            </a>
                        </div>
                        @*<div class="round-block"></div>*@
                        @*<p class="author-name">Joe</p>
                        <p class="shortTexts">@news[j].Description</p>*@
                        <p><a href="@Url.Action("BlogDetail", "NewsArticals", new { id = news[j].Id })" style="float:right;">Read More</a></p>
                    </div><!-- block -->

                    if (j == 5)
                    {
                        i = j + 1;
                        break;
                    }
                }
            }
        </div><!-- blocks -->
        <div class="blocks">
            @if (news != null)
            {
                int k = 0;

                for (k = k + i; k < news.Count; k++)
                {
                    <div class="block-article">
                        <a href="@Url.Action("BlogDetail", "NewsArticals", new { id = news[k].Id })">
                            <div class="image-block">
                                <img src="~/images/Blog/@news[k].FeaturedImage" style="width:259px;height:173px;">

                            </div>
                            <h4>@news[k].Title</h4>
                            @if (news[k].BlogCategory != null)
                            {
                                <p class="sub-title">@news[k].BlogCategory.Name</p>
                            }

                        </a>
                    </div><!-- block -->



                    if (k == 9)
                    {
                        i = k + 1;
                        break;
                    }

                }
            }
        </div><!-- blocks -->

        <div class="blocks">
            @if (news != null)
            {
                for (int k = i; k < news.Count; k++)
                {

                    <div class="block-article column-50">
                        <div class="image-block">
                            <a href="@Url.Action("BlogDetail", "NewsArticals", new { id = news[k].Id })">
                                <p class="blog-title">@news[k].Title</p>
                                <img src="~/images/Blog/@news[k].FeaturedImage" style="width:562px;height:148px;">
                            </a>
                        </div>
                        @*<div class="round-block"></div>
                        <p class="author-name">Joe Bloggs</p>*@
                        @*<p class="shortTexts">@news[k].Description</p>*@
                        <p><a href="@Url.Action("BlogDetail", "NewsArticals", new { id = news[k].Id })" style="float:right;">Read More</a></p>
                    </div><!-- block -->
                    if (k == 10)
                    {
                        i = k + 1;
                        break;
                    }
                }
                for (int y = i; y < news.Count(); y++)
                {
                    <div class="block-article">
                        <a href="@Url.Action("BlogDetail", "NewsArticals", new { id = news[y].Id })">
                            <div class="image-block">
                                <img src="~/images/Blog/@news[y].FeaturedImage" alt="">

                            </div>
                            <h4>@news[y].Title</h4>
                            @if (news[y].BlogCategory != null)
                            {
                                <p class="sub-title">@news[y].BlogCategory.Name</p>
                            }

                        </a>
                    </div>                <!-- 2 column-->
                    <!-- block -->

                    if (y == 12)
                    {
                        i = y + 1;
                        break;
                    }
                }
            }
        </div><!-- blocks -->

    </li>
</ul>

<input type="hidden" id="hIdTotalBlogCount" value="@TotalBlogCount" />
<input type="hidden" id="hIdBlogCount" value="@BlogCount" />